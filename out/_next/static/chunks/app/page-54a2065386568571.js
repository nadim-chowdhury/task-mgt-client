(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2792:(e,t,s)=>{Promise.resolve().then(s.bind(s,8861))},8861:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var i=s(7437),o=s(2265),r=s(5426),n=s(8472);let a=[{id:"1",title:"Demo Task 1",description:"This is a description of the demo task 1",status:"To Do",position:0},{id:"2",title:"Demo Task 2",description:"This is a description of the demo task 2",status:"In Progress",position:0},{id:"3",title:"Demo Task 3",description:"This is a description of the demo task 3",status:"Done",position:0}],l="".concat("http://127.0.0.1:5000","/api/tasks")||0,d=async()=>(await n.Z.get(l)).data||a,c=async e=>(await n.Z.post(l,e)).data,p=async(e,t)=>(await n.Z.put("".concat(l,"/").concat(e),t)).data,u=async e=>{await n.Z.delete("".concat(l,"/").concat(e))},m=e=>{let{title:t,children:s,onClose:o,onSave:r}=e;return(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,i.jsxs)("div",{className:"bg-white w-96 p-6 rounded-lg shadow-lg",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:t}),s,(0,i.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,i.jsx)("button",{onClick:o,className:"px-4 py-2 bg-gray-300 rounded transition-all duration-300 hover:bg-gray-200",children:"Cancel"}),(0,i.jsx)("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded transition-all duration-300 hover:bg-blue-600",children:"Save"})]})]})})};var x=s(7476);let b=e=>{let{taskId:t,content:s,description:o="",index:n,onEdit:a,onDelete:l}=e;return(0,i.jsx)(r._l,{draggableId:t,index:n,children:(e,t)=>(0,i.jsxs)("div",{ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,className:"bg-white p-4 rounded-md border ".concat(t.isDragging?"shadow-lg":""," flex justify-between items-start"),style:{...e.draggableProps.style},children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("div",{className:"font-semibold text-lg",children:s}),o&&(0,i.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:o})]}),(0,i.jsxs)("div",{className:"flex ml-2",children:[a&&(0,i.jsx)("button",{onClick:a,className:"text-blue-500 hover:text-blue-700 p-2 rounded-full transition-all duration-300 hover:bg-blue-100",children:(0,i.jsx)(x.vPQ,{})}),l&&(0,i.jsx)("button",{onClick:l,className:"text-red-500 hover:text-red-700 p-2 rounded-full transition-all duration-300 hover:bg-red-100",children:(0,i.jsx)(x.Ybf,{})})]})]})})},h=()=>{let[e,t]=(0,o.useState)({"To Do":{id:"To Do",title:"To Do",items:[]},"In Progress":{id:"In Progress",title:"In Progress",items:[]},Done:{id:"Done",title:"Done",items:[]}}),[s,a]=(0,o.useState)(!1),[h,g]=(0,o.useState)(null),[f,j]=(0,o.useState)({title:"",description:""}),[y,v]=(0,o.useState)(!1);(0,o.useEffect)(()=>{v(!0)},[]),(0,o.useEffect)(()=>{y&&(async()=>{try{let e=await d(),s={"To Do":{id:"To Do",title:"To Do",items:[]},"In Progress":{id:"In Progress",title:"In Progress",items:[]},Done:{id:"Done",title:"Done",items:[]}};e.forEach(e=>{s[e.status]&&s[e.status].items.push({id:e._id,content:e.title,description:e.description,position:e.position})}),Object.keys(s).forEach(e=>{s[e].items.sort((e,t)=>e.position-t.position)}),t(s)}catch(e){console.error("Error fetching tasks:",e)}})()},[y]);let k=async(e,t)=>{console.log("Home ~ items:",t),console.log("Home ~ columnId:",e);try{console.log("Sending payload to server:",{columnId:e,tasks:t.map(e=>({id:e.id,position:e.position}))});let s=await n.Z.post("".concat(l,"/order"),{columnId:e,tasks:t.map(e=>({id:e.id,position:e.position}))});console.log("Home ~ res:",s)}catch(e){console.error("Error updating column order:",e)}},D=async s=>{if(!s.destination)return;let{source:i,destination:o}=s;if(i.droppableId!==o.droppableId){let s=e[i.droppableId],r=e[o.droppableId],n=Array.from(s.items),a=Array.from(r.items),[l]=n.splice(i.index,1);l.position=o.index,a.splice(o.index,0,l),a.forEach((e,t)=>{e.position=t});let d={...e,[i.droppableId]:{...s,items:n},[o.droppableId]:{...r,items:a}};console.log("onDragEnd ~ updatedColumns:",d),t(d);try{await p(l.id,{title:l.content,description:l.description,status:o.droppableId,position:o.index});let e=await k(o.droppableId,a);console.log("onDragEnd ~ updateColumnOrderIfres:",e)}catch(e){console.error("Error updating task:",e)}}else{let s=e[i.droppableId],r=Array.from(s.items),[n]=r.splice(i.index,1);r.splice(o.index,0,n),r.forEach((e,t)=>{e.position=t}),t(e=>({...e,[i.droppableId]:{...s,items:r}}));try{let e=await k(i.droppableId,r);console.log("onDragEnd ~ updateColumnOrderElseres:",e)}catch(e){console.error("Error updating task order:",e)}}},w=async()=>{if(f.title)try{let s=e["To Do"].items.length,i=await c({...f,position:s});t(e=>({...e,"To Do":{...e["To Do"],items:[...e["To Do"].items,{id:i._id,content:i.title,description:i.description,position:s}]}})),a(!1),j({title:"",description:""})}catch(e){console.error("Error creating task:",e)}},N=e=>{g({_id:e._id,title:e.title,description:e.description,status:e.status,position:e.position}),j({title:e.title,description:e.description}),a(!0)},E=async()=>{if(h&&f.title)try{await p(h._id,{...f,status:h.status}),t(e=>{let t=e[h.status],s=t.items.map(e=>e.id===h._id?{...e,content:f.title,description:f.description}:e);return{...e,[h.status]:{...t,items:s}}}),a(!1),g(null),j({title:"",description:""})}catch(e){console.error("Error updating task:",e)}},I=async(e,s)=>{try{await u(e),t(t=>{let i=t[s].items.filter(t=>t.id!==e);return{...t,[s]:{...t[s],items:i}}})}catch(e){console.error("Error deleting task:",e)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-8",children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold uppercase cursor-pointer",children:["Task"," ",(0,i.jsx)("span",{className:"text-blue-500 hover:text-blue-700 transition-all duration-300",children:"MGT"})]}),(0,i.jsxs)("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-700 transition-all duration-300 text-white rounded flex items-center gap-2",children:["Add Task ",(0,i.jsx)(x.O9D,{})]})]}),(0,i.jsx)(r.Z5,{onDragEnd:D,children:(0,i.jsx)("div",{className:"flex flex-col md:flex-row justify-center gap-6 px-8",children:Object.entries(e).map(e=>{let[t,s]=e;return(0,i.jsx)(r.bK,{droppableId:t,direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,children:e=>(0,i.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"bg-blue-50 rounded-lg w-full h-[75vh] overflow-y-scroll p-4 border flex flex-col space-y-4",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:s.title}),s.items.map((e,s)=>(0,i.jsx)(b,{taskId:e.id,content:e.content,description:e.description,index:s,onEdit:()=>N({_id:e.id,title:e.content,description:e.description,status:t,position:e.position}),onDelete:()=>I(e.id,t)},e.id)),e.placeholder]})},t)})})}),s&&(0,i.jsxs)(m,{title:h?"Edit Task":"Create Task",onClose:()=>{a(!1),g(null),j({title:"",description:""})},onSave:h?E:w,children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Title"}),(0,i.jsx)("input",{type:"text",value:f.title,onChange:e=>j({...f,title:e.target.value}),className:"w-full border border-gray-300 rounded p-2"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,i.jsx)("textarea",{value:f.description,onChange:e=>j({...f,description:e.target.value}),className:"w-full border border-gray-300 rounded p-2"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[956,216,262,130,215,744],()=>t(2792)),_N_E=e.O()}]);